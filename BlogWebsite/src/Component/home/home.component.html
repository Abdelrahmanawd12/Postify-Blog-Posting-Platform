<div class="blog-container">
  <!-- Floating Action Button -->
<div class="fab-container" *ngIf="isLoggedIn()">
  <button class="fab-btn" *ngIf="!showAddPostComponent" (click)="toggleAddPost(true)">
    <i class="fas fa-plus"></i>
  </button>
</div>

 <!-- Posts List -->
  <div class="posts-stack">
    @for(p of posts; track p.id) {
    <article class="post-card">
      <!-- User Info -->
      <div class="post-header" *ngIf="getUserById(p.userId) as user">
        <div class="d-flex align-items-center gap-1">
                <div class="user-avatar">
                      @if(user.image) {
                        <img [src]="user.image" alt="User avatar">
                      }@else {
                        <img src="assets/default-avatar.png" alt="Default avatar">
                      }
                    </div>



                    <div class="user-info">
                      @if(user.firstName && user.lastName) {
                        <h4>{{user.firstName}} {{user.lastName}}</h4>
                      } @else {
                        <h4>{{user.username}}</h4>
                      }
                    </div>


        </div>

            <div class="post-crud " *ngIf="currentUser.id == p.userId">
              <i class="fa-solid fa-pen-to-square" (click)="updatePost(p.id)"></i>
              <i class="fa-solid fa-trash" (click)="deletePost(p.id)"></i>
            </div>



      </div>

      <!-- Post Content -->
      <div class="post-content">
        <h3 class="post-title">{{p.title}}</h3>
        <p class="post-text">{{p.body}}</p>
      </div>

      <!-- Post Image -->
      @if(p.imageUrl) {
      <div class="post-image-container">
        <img [src]="p.imageUrl" alt="Post image">
      </div>
      }

      <!-- Post Stats -->
      <div class="post-stats">
        <div class="stat-item">
          <i class="fa-regular fa-thumbs-up"></i>
          <span>{{p.reactions.likes}}</span>
        </div>
        <div class="stat-item">
          <i class="fa-regular fa-thumbs-down"></i>
          <span>{{p.reactions.dislikes}}</span>
        </div>
        <div class="stat-item">
          <i class="fa-regular fa-comment"></i>
          <span>{{p.comments?.length}}</span>
        </div>
        <div class="stat-item">
          <i class="fa-regular fa-eye"></i>
          <span>{{p.views}}</span>
        </div>
      </div>

      <!-- Post Actions -->
      <div class="post-actions">
        <button class="action-btn" (click)="likePost(p)">
          @if(isLiked(p)) {
            <i class="fa-solid fa-thumbs-up liked"></i>
          } @else {
            <i class="fa-regular fa-thumbs-up"></i>
          }
          {{getText("Like")}}
        </button>

        <button class="action-btn" (click)="dislikePost(p)">
          @if(isDisliked(p)) {
            <i class="fa-solid fa-thumbs-down disliked"></i>
          } @else {
            <i class="fa-regular fa-thumbs-down"></i>
          }
          {{getText("Dislike")}}
        </button>

        <button class="action-btn" (click)="viewPost(p.id)">
          <i class="fa-regular fa-comment"></i>
          {{getText("Comment")}}
        </button>
      </div>
    </article>
    }
  </div>
</div>


<!-- Add Post Component -->
<app-add-post *ngIf="showAddPostComponent" (showAddPost)="toggleAddPost($event)"></app-add-post>




